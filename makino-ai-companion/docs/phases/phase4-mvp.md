# Phase 4: MVP開発 (Pattern 1)

## 基本情報

- **期間**: Month 7 - 8（2ヶ月間）
- **目的**: Pattern 1（牧野生保塾 質問対応AI伴走システム）を本格開発し、実運用に耐えうる品質に仕上げる
- **前提**: Phase 3の検証結果・改善点リストが確定していること

## Month 7: MVP開発

### 7.1 PoC改善と機能強化

PoCでの検証結果に基づき、以下を改善する:
- 回答精度の向上
- レスポンス速度の最適化
- ユーザーインターフェースの改善

### 7.2 ナレッジベースの拡充

PoC対象範囲外の過去セミナー動画・テキストデータを追加学習させ、Pattern 1の全範囲をカバーする。

### 7.3 エラーハンドリングとエスカレーション

- システムエラー時の適切なメッセージ表示
- 回答不能時の有人対応（牧野氏・運用担当）への連携機能

### 7.4 MVP機能一覧

| 機能名称 | 具体的な動作・仕様 | 実装目的 |
|---------|------------------|---------|
| 質問応答機能 | RAGによるナレッジ検索＋回答生成 | 24時間365日の即時回答 |
| 人格トレース | 牧野氏の語彙・口癖・トーンをプロンプトで制御 | カリスマ性によるエンゲージメント強化 |
| 出典表示 | 回答末尾に根拠情報を明示 | 信頼性担保・オリジナルコンテンツへの誘導 |
| エスカレーション | 確信度低い場合に運用担当へ通知 | 誤回答リスクの低減 |
| フィードバック | Good/Bad評価ボタン | 回答精度の定点観測 |
| ログ自動蓄積 | 全対話データをSQLiteにリアルタイム記録 | 運用データの可視化・ニーズ分析 |

### 7.5 ログ自動蓄積システム

**データフロー:**

```
[ユーザー] → 質問 → [FastAPI + Claude API] → 回答 → [ユーザー]
                          │
                     SQLite保存（リアルタイム）
                          │
                          ▼
              [data/conversations.db] → 定期CSV出力 → [logs/exports/]
                                                           │
              [ユーザー] → 評価 (Good/Bad) → [/api/feedback] → SQLite反映
                                                           │
                                                      データ分析
                                                           │
                                                      改善施策 → 次期エージェント品質向上
```

**ログ蓄積カラム設計:**

| カラム | 内容 | 入力タイプ |
|--------|------|----------|
| timestamp | 質問日時 | 自動 |
| user_id | ユーザー識別子（匿名化済み） | 自動 |
| bot_pattern | 使用パターン (1-4) | 自動 |
| question | 質問内容全文 | 自動 |
| answer | 回答内容全文 | 自動 |
| source_used | 参照ナレッジソース | 自動 |
| confidence | 確信度スコア (0.0-1.0) | 自動 |
| user_rating | ユーザー評価 | 自動 |
| escalated | エスカレーション有無 | 自動 |
| category | 質問自動分類 | 自動 |
| review_status | 確認状況（未/済/要対応） | 手動 |
| action_taken | 対応内容メモ | 手動 |

## Month 8: MVP検証・改善

### 8.1 検証方法

- **対象**: 牧野生保塾会員へのβ版限定公開
- **期間**: 2〜4週間の試用期間
- **目的**: 実際の質問に対する回答品質確認・フィードバック収集

### 8.2 改善サイクル（2週間スプリント x 2回）

```
公開 → 利用 → フィードバック → 改善 → 再公開
```

### 8.3 品質向上サイクル（月次運用開始後）

```
Week 1-2: データ蓄積（全Q&Aログ、ユーザー評価、エスカレーション記録）
Week 3:   週次レビュー（低評価分析、新規カテゴリ抽出、確信度低下要因特定）
Week 4:   改善・更新（ナレッジ追加、プロンプト微調整、言い回し辞書更新）
翌月頭:    リリース（改善版公開、効果測定、次サイクルへ）
```

## 成果物一覧

| 成果物 | 内容 | 構成要素 |
|--------|------|---------|
| MVP版AI伴走システム (Pattern 1) | 実運用版 | FastAPIアプリ本体、ナレッジベースVer.1.0、SQLiteログ蓄積、エスカレーション機能 |
| 運用マニュアル（初版） | 日常管理・運用手順 | 起動/停止手順、ナレッジ追加フロー、エスカレーション対応フロー |
| 改善ログ（版数管理） | β版期間中のFB・改善記録 | ユーザーFB一覧、プロンプト変更履歴、ナレッジ更新履歴、未解決課題 |

## 完了基準

- [ ] Pattern 1が安定稼働している
- [ ] β版テストで重大な不具合（Critical）がゼロ
- [ ] 回答精度が目標値（80%以上）を達成している
- [ ] 運用マニュアルが作成され、運用担当が自立運用可能な状態
